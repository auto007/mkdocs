**`net.ipv4.tcp_window_scaling=1`** 这个内核参数的确**有可能提升网络传输速度**，特别是在**高带宽、高延迟（高 BDP, Bandwidth-Delay Product）**的网络环境中，例如：

- 跨国传输（如中美之间的数据同步）
    
- 数据中心与云之间的通信
    
- 需要大吞吐量的数据传输场景（如文件同步、备份、FTP、大文件传输）
    

---

### 🔍 参数含义简要说明：

`net.ipv4.tcp_window_scaling = 1`

- 启用 **TCP 窗口扩大（Window Scaling）选项**。
    
- TCP 默认的窗口大小最大为 65,535 字节（约 64KB），这个大小在高延迟网络上会成为瓶颈。
    
- 开启后，TCP 可以通过“窗口扩大因子”把窗口扩大到 **1GB（2³⁰ 字节）**，从而提高吞吐能力。
    

---

### ✅ 启用的效果：

- ✅ **提高 TCP 吞吐量**，尤其在 RTT（往返时间）高、带宽大的网络环境中显著。
    
- ✅ 适用于**大文件传输**、**多并发连接**等网络密集型应用。
    

---

### ⚠️ 注意事项：

1. **大多数 Linux 发行版默认已经开启了该选项**，可以通过以下命令查看是否已启用：
    
    `sysctl net.ipv4.tcp_window_scaling`
    
    输出为 `1` 表示已开启。
    
2. 只是开启这个选项**本身不会立刻生效**，还需要搭配调整如下参数才能充分发挥作用：
    
    ```shell
    net.core.rmem_max
    net.core.wmem_max
    net.ipv4.tcp_rmem
    net.ipv4.tcp_wmem
    ```
    
    
    示例配置（适用于高吞吐网络）：
    
    ```
   net.core.rmem_max = 134217728
   net.core.wmem_max = 134217728
   net.ipv4.tcp_rmem = 4096 87380 134217728
   net.ipv4.tcp_wmem = 4096 65536 134217728
   ```
    
    > 注意根据实际环境做测试，不建议在低内存系统中直接套用。
    

---

### 🧪 如何验证效果：

可使用 `iperf3` 测试 TCP 吞吐：

`iperf3 -c [server-ip] -t 10`

对比开启与关闭 window scaling 后的带宽变化。

---

### ✅ 总结：

|场景|启用 `tcp_window_scaling=1` 是否推荐|
|---|---|
|内网，低延迟|意义不大|
|公网、跨境、云传输、大文件同步|推荐启用|
|配置低、内存紧张的设备|谨慎调整窗口大小|